name: Frontend formatting & linting

on:
  push:
    paths:
      - "stories/**"
      - "web/themes/custom/bixal_uswds/src/**"
  pull_request:
    paths:
      - "stories/**"
      - "web/themes/custom/bixal_uswds/src/**"

jobs:
  format:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v5
      - name: Install node
        uses: actions/setup-node@v5
        with:
          node-version-file: ".nvmrc"
          cache: "npm"
      - name: Install node dependencies
        run: npm ci --timing
      - name: Format Styles
        run: npm run format:styles
      - name: Format JS
        run: npm run format:js
  lint:
    needs:
      - format
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v5
      - name: Install node
        uses: actions/setup-node@v5
        with:
          node-version-file: ".nvmrc"
          cache: "npm"
      - name: Install node dependencies
        run: npm ci --timing
      - name: Lint Styles
        run: npm run lint:styles
      - name: Lint JS
        run: npm run lint:js
